# 키워드 정리

## 리액트 학습 가이드 
- 빠르게 학습을 원한다면, 먼저 뭘 만들지부터 정의하자. 그리고 무엇이 필요한지 찾아보자.
- 제대로 공부하고 싶다면, 아래 순서대로 찬찬히 보자.

#### 1. 싱글 페이지 단순 뷰어
- create-react-app 으로 시작하기
- npm 명령어 익히기, npm install & npm start 
- 로컬에서 실시간으로 개발하는 방법 확인 
- 리액트 컴포넌트에 대한 이해 
- 컴포넌트 라이프사이클 
- Props 와 State
- 이벤트 바인딩, .bind()를 대체하는 기법
- ES6 문법은 틈틈히
 
#### 2. 싱글 페이지 단순 뷰어 + 프로덕션 배포
- npm run build 
- pushstate-server build
- 스택티 서버(아파치 or NginX)에 배포하기 
- 프록시로 fallback 처리
- npm과 yarn 

#### 3. 웹팩(Webpack)
- npm run eject
- SCSS 또는 LESS 설정 
- ESLint 
- ESLint 플러그인 (import, react, jsx-ally)
- package.json 파일에 설정 오버라이딩
- Antd UI 프레임워크 설정 
- Visualizer 설정
- 브라우저 싱크 설정 

#### 4. 컴포넌트에서 비동기 제어
- 비동기 호출은 ComponentDidMount 에서..
- 비동기 제어 페러다임 
 - 콜백: Ajax, Promise
 - 코루틴: generator, async await
 - 단방향 메시징: Flux, elm, Redux
 - 리액티브: Rx


#### 5. 멀티 페이지 단순 뷰어
- 동적 데이터는 서버에서 만든다. 
- 페이지 기반 사이트 
- 서버에서 JSON 으로 값을 내려 컴포넌트에 프로퍼티로 주입하기
- 서버 랜더링 
- 서버 라우팅과 URL 
- 멀티 페이지에 번들링하기 (웹팩 멀티 엔트리 포인트 설정)


#### 6. 페이지간 데이터 교환
- 브라우저 쿠키와 세션
- 회원 인증하기
- HTTP와 HTTPS
- 보안 강화 

#### 7. 복잡한 싱글 페이지
- 사용자별 TODO 리스트 만들기 
- 브라우저 스토어 객체 (세션스토리지,쿠키,로컬스토리지)


#### 8. 싱글 페이지 + 라우팅
- 복잡한 기능을 분리해서 클라이언트 라우팅하기
- 회원가입과 TODO 리스트 만들기 
- 리액트 라우팅
- 라우팅 훅
- 마지막 상태값 저장하고 복원하기


#### 9. 싱글 페이지 + 라우팅 + Redux 스토어
- 클라이언트 데이터를 Redux 스토어에 저장하기
- Redux 스토어 메소드 ( dispatch, subscribe, getState )
- 액션과 액션 생성자 
- 리듀서
- 테스트 코드 작성
- 리액트 바인딩 ( connect )

#### 10. Redux Advance
- 중첩 리듀서 
- 미들웨어 
- 로깅 미들웨어
- Hoc 패턴
- 리덕스 디버깅 도구 

#### 11. Redux 비동기 제어 
- redux-thunk
- redux-promise
- redux-saga


#### 12. 애플리케이션 설계 
- 협업을 위한 규칙 정하기
- 프로젝트 폴더 구조 잡기 
- 서비스 객체 정의하기 
- 컨테이너와 프리젠테이션 분리하기 
- 비동기 제어를 위한 규칙 정하기






#### 2. 멀티 페이지 단순 뷰어 (중급)


## 지난시간 리뷰 
 - [과제] counter 액션 생성자를 이용해 React 코드에서 액션을 실행해볼것.
 - 들어가기 앞서서.. Webpack root resolve 설정하기
 - 웹팩 resolve 설정하면, 
 


## 리액트 바인딩 
리액트와 리덕스를 연결하는 방법은 정형화된 패턴으로 되어 있다. 

``` 
npm install react-redux --save 
```

- 먼저 리액트 바인딩 모듈에 포함되어 있는 Provider를 이용해 store를 주입한다. 
여기서 Provider의 역할은 모든 하위 컴포넌트에 자동으로 props를 주입하기 위함이다.

```
// index.js 

import { createStore } from 'redux';
import { Provider } from 'react-redux';

ReactDOM.render(
  <Provider store={store}>
    <Router history={browserHistory} routes={routes} />
  </Provider>
  , document.getElementById('root'));

```


- 리액트 바인딩은 react-redux의 connect 함수를 이용한다.




``` 
import { connect } from 'react-redux';

class HomePage extends Component {}
...
.. 중략
...

export default connect({}, {})(HomePage);
```



#### [실습1] 




## 리덕스 흐름도

일단 리덕스 스토어를 만든다.!
``` 

  // 스토어 생성 
  const 스토어 = createStore( 리듀서 )    --- 1. 스토어에 리듀서를 등록한다.

  // 스토어를 모니터할 리스너 등록 
  스토어.subscribe( 리스너 )              --- 2. 여기서 리스너는 일반 함수다.
  
  // 스토어.subscribe 의 내부 동작 
  {
    var currentListeners = [];         --- 3. 내부적으로 관리하는 리스너 배열에 리스너를 추가한다. 
    currentListeners.push(리스너)
  }
  
``` 

이제 액션을 만들고 싶다.
```
  // 스토어에 액션 전달  
  스토어.dispatch( 액션 )                        --- 1. 여기서 액션은 플레인 객체다. { type }
 
  // 스토어.dispatch 의 내부 동작                  --- 2. 스토어에 등록된 리듀서를 실행해 새로운 상태를 만든다.
  {
    스토어_현재_상태 = 리듀서( 스토어_현재_상태, 액션 )   --- 3. 여기서 리듀서는 반드시 새로운 레퍼런스를 만들어서 반환해야한다. 
    
    for( 리스너 in currentListeners ) {         --- 4. 등록된 리스너를 모두 실행시킨다.
        리스너()
    }
  }
  
```     

## 다중 리듀서 
리덕스는 단일 스토어 구조를 가지고 있지만 아래와 같이 스토어 객체의 브랜치마다 전용 리듀서를 배치할수있다.
``` 
 스토어_상태_객체 = {
 
    로그인: 로그인_리듀서,
    라우터: 라우터_리듀서,
    todos: todoReducer
    ...
 
 }
```

다중 리듀서를 이용하려면 리덕스의 **combineReducers** 함수를 이용한다.
``` 
import { combineReducers }  from 'redux';

const 스토어 = createStore( 
  
  combineReducers({
    로그인: 로그인_리듀서,
    라우터: 라우터_리듀서,
    todos: todoReducer
  }) 

)
```
컴바인 리듀서는 키-벨류 쌍으로 리듀서를 관리하기 때문에 리듀서와 맵핑된느 키값이 스토어의 Flat한 객체 구조라고 생각하면 된다. 

위와 같이 컴바인 리듀서로 등록하면 dispatch 로 액션을 실행할때 아래와 같이 실행한 것과 동일한 과정으로 모든 리듀서를 실행한다.
  
```                 
const 로그인 = 로그인_리듀서(스토어_상태.로그인, 액션);
const 라우터 = 라우터_리듀서(스토어_상태.라우터, 액션);
const todos = todoReducer(스토어_상태.todos, 액션); 

스토어_상태 = {
  로그인,
  라우터,
  todos
}

```


## Presentational 컴포넌트 VS Container 컴포넌트

|               | Presentational Components        | Container Components                          |  
| --------------|:--------------------------------:|:---------------------------------------------:|
| 목적           | 어떻게 보일꺼냐? (markup, styles)    | 어떻게 동작할꺼냐? (data fetching, state updates)  |   
| 리덕스 인지유무   | 모른다. 	                       | 안다                                           |
| 데이터를 읽어오는곳	| 프로퍼티에서 가져온다.                 | 리덕스 상태를 모니터 한다.                          | 
| 데이터 변경      | 프로퍼티가 변경되면 자동 전파 된다.	   | 리덕스 액션이 수행되면 변경된다.                      | 
| Are written	| By hand	                       | Usually generated by React Redux              | 



## 참고문서 
1. 풀스택 튜토리얼 - http://teropa.info/blog/2015/09/10/full-stack-redux-tutorial.html
2. 이뮤터블JS가 짜증난다면, seamless-immutable
